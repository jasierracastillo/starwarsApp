"use strict";(self.webpackChunkstarwarsApp=self.webpackChunkstarwarsApp||[]).push([[530],{5530:(B,f,n)=>{n.r(f),n.d(f,{FilmsModule:()=>M});var O=n(2271),o=n(9808),t=n(5e3),g=n(1135),F=n(9300),c=n(4004),C=n(520);let p=(()=>{class i{constructor(e){this.http=e,this.films$=new g.X(null),this.singleFilm$=new g.X(null),this.tmpObj={id:0,object:""},this.apiGetUrl="https://swapi.dev/api/films/"}get responseObject(){return this.singleFilm$.asObservable().pipe((0,F.h)(e=>null!=e))}get responseFilmObject(){return this.films$.asObservable().pipe((0,F.h)(e=>null!=e))}loadFilmsList(){return this.http.get(this.apiGetUrl).pipe((0,c.U)(e=>e.data)).subscribe(e=>{this.films$.next(e)}),this.films$.asObservable()}loadFilmById(e){return this.http.get(this.apiGetUrl+e).pipe((0,c.U)(s=>s.data)).subscribe(s=>{this.singleFilm$.next(s)}),this.singleFilm$.asObservable()}getFilmsbyFilter(e){return this.http.get(this.apiGetUrl+"?search="+e).pipe((0,c.U)(s=>s.results))}getFilms(e){return this.http.get(this.apiGetUrl+e).pipe((0,c.U)(s=>s.results))}getFilmById(e){return this.http.get(this.apiGetUrl+`${e}`).pipe((0,c.U)(s=>s.results))}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(C.eN))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var m=n(3477),v=n(9262),d=n(8306),A=n(1065);let U=(()=>{class i{constructor(e,s){this.service=e,this._activeRoute=s,this.film$=new d.y,this.segment="films",this.id=0}ngOnInit(){this.getByState()}ngOnChanges(e){}getByState(){const e=history.state;this.id=e.key,this.filmObj=e.data}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(p),t.Y36(m.gz))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-films-details-panel"]],features:[t.TTD],decls:27,vars:6,consts:[[1,"table","table-hover"],[3,"item"]],template:function(e,s){1&e&&(t.TgZ(0,"table",0),t.TgZ(1,"tr"),t.TgZ(2,"td"),t._uU(3,"Title"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.qZA(),t.TgZ(6,"tr"),t.TgZ(7,"td"),t._uU(8,"Episode"),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.qZA(),t.TgZ(11,"tr"),t.TgZ(12,"td"),t._uU(13,"Opening crawl"),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.qZA(),t.qZA(),t.TgZ(16,"tr"),t.TgZ(17,"td"),t._uU(18,"Director"),t.qZA(),t.TgZ(19,"td"),t._uU(20),t.qZA(),t.qZA(),t.TgZ(21,"tr"),t.TgZ(22,"td"),t._uU(23,"Producer"),t.qZA(),t.TgZ(24,"td"),t._uU(25),t.qZA(),t.qZA(),t.qZA(),t._UZ(26,"app-back-button",1)),2&e&&(t.xp6(5),t.Oqu(s.filmObj.title),t.xp6(5),t.Oqu(s.filmObj.episode_id),t.xp6(5),t.Oqu(s.filmObj.opening_crawl),t.xp6(5),t.Oqu(s.filmObj.director),t.xp6(5),t.Oqu(s.filmObj.producer),t.xp6(1),t.Q6J("item",s.segment))},directives:[A.W],encapsulation:2}),i})(),L=(()=>{class i{constructor(e,s){this.service=e,this.route=s,this.id=0}ngOnInit(){this.id=this.route.snapshot.params.id,console.log("ID: ",this.id),this.film=this.service.loadFilmById(this.id),console.log(this.film)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(p),t.Y36(m.gz))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-films-details"]],decls:3,vars:0,consts:[[1,"container"]],template:function(e,s){1&e&&(t._UZ(0,"app-navigator"),t.TgZ(1,"div",0),t._UZ(2,"app-films-details-panel"),t.qZA())},directives:[v.S,U],styles:[""]}),i})();var u=n(5620);const Z=i=>i.films,_=(0,u.P1)(Z,i=>i.films),I=(0,u.P1)(Z,i=>i.loading);var T=n(2975),b=n(2051);const $=function(i){return["/starwars/films/details",i]};function x(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"li"),t._UZ(1,"i",3),t.TgZ(2,"span"),t._uU(3),t.qZA(),t._uU(4),t.ALo(5,"date"),t.TgZ(6,"a",4),t.NdJ("click",function(){const r=t.CHM(e),a=r.index,h=r.$implicit;return t.oxw(2).sendWithState(a,h)})("click",function(){const r=t.CHM(e),a=r.index,h=r.$implicit;return t.oxw(2).sendItemDetail(a,h)}),t._uU(7,"More details"),t.qZA(),t._uU(8," ) "),t.qZA()}if(2&i){const e=l.$implicit,s=l.index;t.xp6(3),t.Oqu(e.title),t.xp6(1),t.AsE(" | ",e.director," | ",t.lcZ(5,4,e.created)," \xbb ( "),t.xp6(2),t.Q6J("routerLink",t.VKq(6,$,s))}}function q(i,l){if(1&i&&(t.TgZ(0,"div",1),t.TgZ(1,"ul"),t.YNc(2,x,9,8,"li",2),t.ALo(3,"async"),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",t.lcZ(3,1,e.films$))}}let P=(()=>{class i{constructor(e,s,r){this.service=e,this.router=s,this.store=r,this.films$=new d.y,this.selectedItem=new t.vpe,this.filter=""}ngOnInit(){}sendItemDetail(e,s){this.selectedItem.emit({pos:e,value:s})}sendWithState(e,s){this.router.navigate(["/starwars/films/details/"+e],{state:{key:e,data:s}})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(p),t.Y36(m.F0),t.Y36(u.yh))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-films-list-panel"]],inputs:{films$:"films$",filter:"filter"},outputs:{selectedItem:"selectedItem"},decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[4,"ngFor","ngForOf"],["aria-hidden","true",1,"fa","fa-film"],[3,"routerLink","click"]],template:function(e,s){1&e&&t.YNc(0,q,4,3,"div",0),2&e&&t.Q6J("ngIf",s.films$)},directives:[o.O5,o.sg,m.yS],pipes:[o.Ov,o.uU],styles:["li[_ngcontent-%COMP%]{margin:20px}span[_ngcontent-%COMP%]{color:#dc143c}"]}),i})();function S(i,l){1&i&&(t.TgZ(0,"div",3),t._uU(1," Loading ...\n"),t.qZA())}let y=(()=>{class i{constructor(e,s){this.service=e,this.store=s,this.loading$=new d.y,this.itemSelcted=new d.y,this.filter="",this.itemType="films"}ngOnInit(){this.loading$=this.store.select(I),this.films$=this.store.select(_),this.store.dispatch((0,T.x)()),this.service.getFilmsbyFilter(this.filter).subscribe(e=>{this.store.dispatch((0,T.Z)({films:e}))})}ngOnChanges(e){}getItem(e){console.log("Selected in filsm-list.c: ",e),this.itemSelcted=e}recieveFilter(e){console.log("Filtro: ",e.entry),this.filter=e.entry}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(p),t.Y36(u.yh))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-films-list"]],features:[t.TTD],decls:5,vars:6,consts:[[3,"itemType","selectedEntry"],["class","alert alert-info","role","alert",4,"ngIf"],[3,"films$","filter","selectedItem"],["role","alert",1,"alert","alert-info"]],template:function(e,s){1&e&&(t.TgZ(0,"app-search-panel",0),t.NdJ("selectedEntry",function(a){return s.recieveFilter(a)}),t.qZA(),t._UZ(1,"app-navigator"),t.YNc(2,S,2,0,"div",1),t.ALo(3,"async"),t.TgZ(4,"app-films-list-panel",2),t.NdJ("selectedItem",function(a){return s.getItem(a)}),t.qZA()),2&e&&(t.Q6J("itemType",s.itemType),t.xp6(2),t.Q6J("ngIf",t.lcZ(3,4,s.loading$)),t.xp6(2),t.Q6J("films$",s.films$)("filter",s.filter))},directives:[b.m,v.S,o.O5,P],pipes:[o.Ov],styles:[""]}),i})();const D=[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:y},{path:"list/:filter",component:y},{path:"details/:id",component:L}];let j=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[m.Bz.forChild(D)],m.Bz]}),i})(),M=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[o.ez,j,O.m]]}),i})()}}]);